package com.test2.kql;

/* It is the sulotion, I made the comparator part.  Something wrong, I have no idea. I use
 * String[] ss = {"a","b","d","c","e","bea"}; for test, but the output is "". wired??!!!!
 *
 *
 *
 * 18.7 Given a list of words, write a program to find the longest word 
 * made of other words in the list.
 */
import java.util.Arrays;
import java.util.Comparator;
import java.util.HashMap;

class LengthComparator implements Comparator<String> {

	@Override
	public int compare(String s1, String s2) {
		// TODO Auto-generated method stub
		int size1 = s1.length();
		int size2 = s2.length();
		return size1 - size2;
	}
}

public class GetLongestWord {

	String printLongestWord(String arr[]) {
		HashMap<String, Boolean> map = new HashMap<String, Boolean>();
		for (String str : arr) {
			map.put(str, true);
		}
		Arrays.sort(arr, new LengthComparator()); // Sort by length
		for (String s : arr) {
			if (canBuildWord(s, true, map)) {
				System.out.println(s);
				return s;
			}
		}
		return "";
	}

	boolean canBuildWord(String str, boolean isOriginalWord,
			HashMap<String, Boolean> map) {
		if (map.containsKey(str) && !isOriginalWord) {
			return map.get(str);
		}
		for (int i = 1; i < str.length(); i++) {
			String left = str.substring(0, i);
			String right = str.substring(i);
			if (map.containsKey(left) && map.get(left) == true
					&& canBuildWord(right, false, map)) {
				return true;
			}
		}
		map.put(str, false);
		return false;
	}

	public static void main(String[] args) {
		GetLongestWord glw = new GetLongestWord();
		String[] ss = { "a", "b", "c", "d", "e", "bea" };
		String result = glw.printLongestWord(ss);
		System.out.println("result: " + result);

	}

}
